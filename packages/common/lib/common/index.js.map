{"version":3,"sources":["../../src/common/index.js"],"names":["$$","funcs","arg","$","keySep","trimKeySep","str","splitByKeySep","safeKey","key","joinKey","strs","paramsOrArray","length","s","toString","splitKey","getDirFomKey","dropRight","p","getFileFromKey","takeRight","head","configFolder","fieldDefinitions","templateDefinitions","appDefinitionFile","dirIndex","folderPath","getIndexKeyFromFileKey","ifExists","val","exists","notExists","getOrDefault","defaultVal","not","func","isDefined","isUndefined","isNonNull","isNull","isNotNaN","isNaN","allTrue","funcArgs","result","conditionFunc","anyTrue","insensitiveEquals","str1","str2","trim","toLowerCase","isSomething","isNothing","isNothingOrEmpty","v","somethingOrGetDefault","getDefaultFunc","somethingOrDefault","mapIfSomethingOrDefault","mapFunc","mapIfSomethingOrBlank","none","predicate","collection","all","isNotEmpty","ob","isAsync","fn","constructor","name","isNonEmptyArray","isArray","isNonEmptyString","isString","tryOr","failFunc","args","apply","_","tryAwaitOr","defineError","errorPrefix","err","message","tryOrIgnore","tryAwaitOrIgnore","causesException","e","executesWithoutException","handleErrorWith","returnValInError","handleErrorWithUndefined","undefined","switchCase","cases","value","nextCase","nextResult","isValue","val1","val2","isOneOf","vals","defaultCase","memberMatches","member","match","obj","StartsWith","searchFor","searchIn","contains","array","getHashCode","hash","i","char","l","charCodeAt","awEx","promise","isSafeInteger","n","Number","MAX_SAFE_INTEGER","toDateOrNull","Date","toBoolOrNull","toNumberOrNull","isArrayOfString","opts","pushAll","target","items","push","pause","duration","Promise","res","setTimeout","retry","retries","delay","then","events","eventsList","toNumber","toDate","toBool"],"mappings":"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","sourcesContent":["import {\r\n  head,\r\n  tail,\r\n  findIndex,\r\n  startsWith,\r\n  dropRight,\r\n  flow,\r\n  takeRight,\r\n  trim,\r\n  replace,\r\n} from \"lodash\"\r\nimport {\r\n  some,\r\n  reduce,\r\n  isEmpty,\r\n  isArray,\r\n  join,\r\n  isString,\r\n  isInteger,\r\n  isDate,\r\n  toNumber,\r\n  isUndefined,\r\n  isNaN,\r\n  isNull,\r\n  constant,\r\n  split,\r\n  includes,\r\n  filter,\r\n} from \"lodash/fp\"\r\nimport { events, eventsList } from \"./events.js\"\r\n\r\n// this is the combinator function\r\nexport const $$ = (...funcs) => arg => flow(funcs)(arg)\r\n\r\n// this is the pipe function\r\nexport const $ = (arg, funcs) => $$(...funcs)(arg)\r\n\r\nexport const keySep = \"/\"\r\nconst trimKeySep = str => trim(str, keySep)\r\nconst splitByKeySep = str => split(keySep)(str)\r\nexport const safeKey = key =>\r\n  replace(`${keySep}${trimKeySep(key)}`, `${keySep}${keySep}`, keySep)\r\nexport const joinKey = (...strs) => {\r\n  const paramsOrArray = (strs.length === 1) & isArray(strs[0]) ? strs[0] : strs\r\n  return $(paramsOrArray, [\r\n    filter(s => !isUndefined(s) && !isNull(s) && s.toString().length > 0),\r\n    join(keySep),\r\n    safeKey,\r\n  ])\r\n}\r\nexport const splitKey = $$(trimKeySep, splitByKeySep)\r\nexport const getDirFomKey = $$(splitKey, dropRight, p => joinKey(...p))\r\nexport const getFileFromKey = $$(splitKey, takeRight, head)\r\n\r\nexport const configFolder = `${keySep}.config`\r\nexport const fieldDefinitions = joinKey(configFolder, \"fields.json\")\r\nexport const templateDefinitions = joinKey(configFolder, \"templates.json\")\r\nexport const appDefinitionFile = joinKey(configFolder, \"appDefinition.json\")\r\nexport const dirIndex = folderPath =>\r\n  joinKey(configFolder, \"dir\", ...splitKey(folderPath), \"dir.idx\")\r\nexport const getIndexKeyFromFileKey = $$(getDirFomKey, dirIndex)\r\n\r\nexport const ifExists = (val, exists, notExists) =>\r\n  isUndefined(val)\r\n    ? isUndefined(notExists)\r\n      ? (() => {})()\r\n      : notExists()\r\n    : exists()\r\n\r\nexport const getOrDefault = (val, defaultVal) =>\r\n  ifExists(\r\n    val,\r\n    () => val,\r\n    () => defaultVal\r\n  )\r\n\r\nexport const not = func => val => !func(val)\r\nexport const isDefined = not(isUndefined)\r\nexport const isNonNull = not(isNull)\r\nexport const isNotNaN = not(isNaN)\r\n\r\nexport const allTrue = (...funcArgs) => val =>\r\n  reduce(\r\n    (result, conditionFunc) =>\r\n      (isNull(result) || result == true) && conditionFunc(val),\r\n    null\r\n  )(funcArgs)\r\n\r\nexport const anyTrue = (...funcArgs) => val =>\r\n  reduce(\r\n    (result, conditionFunc) => result == true || conditionFunc(val),\r\n    null\r\n  )(funcArgs)\r\n\r\nexport const insensitiveEquals = (str1, str2) =>\r\n  str1.trim().toLowerCase() === str2.trim().toLowerCase()\r\n\r\nexport const isSomething = allTrue(isDefined, isNonNull, isNotNaN)\r\nexport const isNothing = not(isSomething)\r\nexport const isNothingOrEmpty = v => isNothing(v) || isEmpty(v)\r\nexport const somethingOrGetDefault = getDefaultFunc => val =>\r\n  isSomething(val) ? val : getDefaultFunc()\r\nexport const somethingOrDefault = (val, defaultVal) =>\r\n  somethingOrGetDefault(constant(defaultVal))(val)\r\n\r\nexport const mapIfSomethingOrDefault = (mapFunc, defaultVal) => val =>\r\n  isSomething(val) ? mapFunc(val) : defaultVal\r\n\r\nexport const mapIfSomethingOrBlank = mapFunc =>\r\n  mapIfSomethingOrDefault(mapFunc, \"\")\r\n\r\nexport const none = predicate => collection => !some(predicate)(collection)\r\n\r\nexport const all = predicate => collection =>\r\n  none(v => !predicate(v))(collection)\r\n\r\nexport const isNotEmpty = ob => !isEmpty(ob)\r\nexport const isAsync = fn => fn.constructor.name === \"AsyncFunction\"\r\nexport const isNonEmptyArray = allTrue(isArray, isNotEmpty)\r\nexport const isNonEmptyString = allTrue(isString, isNotEmpty)\r\nexport const tryOr = failFunc => (func, ...args) => {\r\n  try {\r\n    return func.apply(null, ...args)\r\n  } catch (_) {\r\n    return failFunc()\r\n  }\r\n}\r\n\r\nexport const tryAwaitOr = failFunc => async (func, ...args) => {\r\n  try {\r\n    return await func.apply(null, ...args)\r\n  } catch (_) {\r\n    return await failFunc()\r\n  }\r\n}\r\n\r\nexport const defineError = (func, errorPrefix) => {\r\n  try {\r\n    return func()\r\n  } catch (err) {\r\n    err.message = `${errorPrefix} : ${err.message}`\r\n    throw err\r\n  }\r\n}\r\n\r\nexport const tryOrIgnore = tryOr(() => {})\r\nexport const tryAwaitOrIgnore = tryAwaitOr(async () => {})\r\nexport const causesException = func => {\r\n  try {\r\n    func()\r\n    return false\r\n  } catch (e) {\r\n    return true\r\n  }\r\n}\r\n\r\nexport const executesWithoutException = func => !causesException(func)\r\n\r\nexport const handleErrorWith = returnValInError =>\r\n  tryOr(constant(returnValInError))\r\n\r\nexport const handleErrorWithUndefined = handleErrorWith(undefined)\r\n\r\nexport const switchCase = (...cases) => value => {\r\n  const nextCase = () => head(cases)[0](value)\r\n  const nextResult = () => head(cases)[1](value)\r\n\r\n  if (isEmpty(cases)) return // undefined\r\n  if (nextCase() === true) return nextResult()\r\n  return switchCase(...tail(cases))(value)\r\n}\r\n\r\nexport const isValue = val1 => val2 => val1 === val2\r\nexport const isOneOf = (...vals) => val => includes(val)(vals)\r\nexport const defaultCase = constant(true)\r\nexport const memberMatches = (member, match) => obj => match(obj[member])\r\n\r\nexport const StartsWith = searchFor => searchIn =>\r\n  startsWith(searchIn, searchFor)\r\n\r\nexport const contains = val => array => findIndex(array, v => v === val) > -1\r\n\r\nexport const getHashCode = s => {\r\n  let hash = 0\r\n  let i\r\n  let char\r\n  let l\r\n  if (s.length == 0) return hash\r\n  for (i = 0, l = s.length; i < l; i++) {\r\n    char = s.charCodeAt(i)\r\n    hash = (hash << 5) - hash + char\r\n    hash |= 0 // Convert to 32bit integer\r\n  }\r\n\r\n  // converting to string, but dont want a \"-\" prefixed\r\n  if (hash < 0) {\r\n    return `n${(hash * -1).toString()}`\r\n  }\r\n  return hash.toString()\r\n}\r\n\r\n// thanks to https://blog.grossman.io/how-to-write-async-await-without-try-catch-blocks-in-javascript/\r\nexport const awEx = async promise => {\r\n  try {\r\n    const result = await promise\r\n    return [undefined, result]\r\n  } catch (error) {\r\n    return [error, undefined]\r\n  }\r\n}\r\n\r\nexport const isSafeInteger = n =>\r\n  isInteger(n) &&\r\n  n <= Number.MAX_SAFE_INTEGER &&\r\n  n >= 0 - Number.MAX_SAFE_INTEGER\r\n\r\nexport const toDateOrNull = s =>\r\n  isNull(s) ? null : isDate(s) ? s : new Date(s)\r\nexport const toBoolOrNull = s => (isNull(s) ? null : s === \"true\" || s === true)\r\nexport const toNumberOrNull = s => (isNull(s) ? null : toNumber(s))\r\n\r\nexport const isArrayOfString = opts => isArray(opts) && all(isString)(opts)\r\n\r\nexport const pushAll = (target, items) => {\r\n  for (let i of items) target.push(i)\r\n}\r\n\r\nexport const pause = async duration =>\r\n  new Promise(res => setTimeout(res, duration))\r\n\r\nexport const retry = async (fn, retries, delay, ...args) => {\r\n  try {\r\n    return await fn(...args)\r\n  } catch (err) {\r\n    if (retries > 1) {\r\n      return await pause(delay).then(\r\n        async () => await retry(fn, retries - 1, delay, ...args)\r\n      )\r\n    }\r\n    throw err\r\n  }\r\n}\r\n\r\nexport { events } from \"./events.js\"\r\n\r\nexport default {\r\n  ifExists,\r\n  getOrDefault,\r\n  isDefined,\r\n  isNonNull,\r\n  isNotNaN,\r\n  allTrue,\r\n  isSomething,\r\n  mapIfSomethingOrDefault,\r\n  mapIfSomethingOrBlank,\r\n  configFolder,\r\n  fieldDefinitions,\r\n  isNothing,\r\n  not,\r\n  switchCase,\r\n  defaultCase,\r\n  StartsWith,\r\n  contains,\r\n  templateDefinitions,\r\n  handleErrorWith,\r\n  handleErrorWithUndefined,\r\n  tryOr,\r\n  tryOrIgnore,\r\n  tryAwaitOr,\r\n  tryAwaitOrIgnore,\r\n  dirIndex,\r\n  keySep,\r\n  $,\r\n  $$,\r\n  getDirFomKey,\r\n  getFileFromKey,\r\n  splitKey,\r\n  somethingOrDefault,\r\n  getIndexKeyFromFileKey,\r\n  joinKey,\r\n  somethingOrGetDefault,\r\n  appDefinitionFile,\r\n  isValue,\r\n  all,\r\n  isOneOf,\r\n  memberMatches,\r\n  defineError,\r\n  anyTrue,\r\n  isNonEmptyArray,\r\n  causesException,\r\n  executesWithoutException,\r\n  none,\r\n  getHashCode,\r\n  awEx,\r\n  events,\r\n  eventsList,\r\n  isNothingOrEmpty,\r\n  isSafeInteger,\r\n  toNumber,\r\n  toDate: toDateOrNull,\r\n  toBool: toBoolOrNull,\r\n  isArrayOfString,\r\n  insensitiveEquals,\r\n  pause,\r\n  retry,\r\n  pushAll,\r\n}\r\n"],"file":"index.js"}